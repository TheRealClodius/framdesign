{
  "toolId": "kb_search",
  "version": "1.0.0",
  "category": "retrieval",
  "description": "Semantic search over knowledge base. Searches people, labs, projects, and visual assets (photos, diagrams, videos, GIFs) using natural language queries. Returns relevant documents with citations. For assets, returns ready-to-use markdown in the metadata.markdown field. IMPORTANT: Metadata descriptions are for reference only; do not use them to describe specific visual details like colors or text layout.",
  "parameters": {
    "type": "object",
    "additionalProperties": false,
    "required": ["query"],
    "properties": {
      "query": {
        "type": "string",
        "description": "Natural language search query",
        "minLength": 3,
        "maxLength": 500
      },
      "top_k": {
        "type": "number",
        "description": "Number of results (default: 5, max: 10, voice auto-clamps to 3)",
        "minimum": 1,
        "maximum": 10,
        "default": 5
      },
      "filters": {
        "type": "object",
        "description": "Optional metadata filters. Each filter accepts a SINGLE value, not arrays.",
        "additionalProperties": false,
        "properties": {
          "type": {
            "type": "string",
            "enum": ["person", "lab", "project", "photo", "diagram", "video", "gif"],
            "description": "Filter by entity type (SINGLE value only). Use photo/diagram/video/gif to search for visual assets."
          }
        }
      },
      "include_snippets": {
        "type": "boolean",
        "description": "Include text snippets (default: true)",
        "default": true
      },
      "include_image_data": {
        "type": "boolean",
        "description": "When searching for visual assets, include image data for the top result (text mode only). Use sparingly for multimodal analysis. DO NOT guess colors or details without this set to true.",
        "default": false
      }
    }
  },
  "sideEffects": "read_only",
  "idempotent": true,
  "requiresConfirmation": false,
  "allowedModes": ["voice", "text"],
  "latencyBudgetMs": 800
}
